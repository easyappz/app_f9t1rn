messages:
  get:
    summary: Get all chat messages
    description: Retrieve paginated list of all chat messages
    tags:
      - Messages
    x-isSecure: true
    security:
      - BearerAuth: []
    parameters:
      - name: page
        in: query
        description: Page number for pagination
        required: false
        schema:
          type: integer
          default: 1
          minimum: 1
      - name: page_size
        in: query
        description: Number of messages per page
        required: false
        schema:
          type: integer
          default: 50
          minimum: 1
          maximum: 100
    responses:
      '200':
        description: List of messages
        content:
          application/json:
            schema:
              type: object
              properties:
                count:
                  type: integer
                  example: 150
                next:
                  type: string
                  nullable: true
                  example: "/api/messages/?page=2"
                previous:
                  type: string
                  nullable: true
                  example: null
                results:
                  type: array
                  items:
                    type: object
                    properties:
                      id:
                        type: integer
                        example: 1
                      username:
                        type: string
                        example: "john_doe"
                      text:
                        type: string
                        example: "Hello, everyone!"
                      timestamp:
                        type: string
                        format: date-time
                        example: "2024-01-15T10:30:00Z"
      '401':
        description: Unauthorized - invalid or missing token
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'

  post:
    summary: Send a new message
    description: Create and send a new message to the chat
    tags:
      - Messages
    x-isSecure: true
    security:
      - BearerAuth: []
    requestBody:
      required: true
      content:
        application/json:
          schema:
            type: object
            properties:
              text:
                type: string
                example: "Hello, everyone!"
                minLength: 1
                maxLength: 1000
            required:
              - text
    responses:
      '201':
        description: Message successfully created
        content:
          application/json:
            schema:
              type: object
              properties:
                id:
                  type: integer
                  example: 1
                username:
                  type: string
                  example: "john_doe"
                text:
                  type: string
                  example: "Hello, everyone!"
                timestamp:
                  type: string
                  format: date-time
                  example: "2024-01-15T10:30:00Z"
      '400':
        description: Bad request - validation error
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'
            example:
              error: "Text field is required"
      '401':
        description: Unauthorized - invalid or missing token
        content:
          application/json:
            schema:
              $ref: '../openapi.yml#/components/schemas/Error'